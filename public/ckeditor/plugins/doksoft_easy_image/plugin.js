(function(){function I(){return"ckeditor";}function b(L){return L.elementMode==3;}function H(L){return L.name.replace(/\[/,"_").replace(/\]/,"_");}function K(L){return L.container.$;}function c(L){return L.document.$;}function i(M){var L=M.getSelection().getStartElement();if(L&&L.$){return L.$;}return null;}function h(){return CKEDITOR.basePath;}function A(){return a("doksoft_easy_image");}function a(L){return CKEDITOR.plugins.getPath(L);}function p(){return CKEDITOR.version.charAt(0)=="3"?3:4;}function z(N,M){if(p()==3){var L=(M.indexOf("doksoft_easy_image_")==-1)?("doksoft_easy_image_"+M):M;if(typeof(N.lang[L])!=="undefined"){return N.lang[L];}else{console.log("(v3) editor.lang['doksoft_easy_image'] not defined");}}else{if(typeof(N.lang["doksoft_easy_image"])!=="undefined"){if(typeof(N.lang["doksoft_easy_image"][M])!=="undefined"){return N.lang["doksoft_easy_image"][M];}else{console.log("editor.lang['doksoft_easy_image']['"+M+"'] not defined");}}else{console.log("editor.lang['doksoft_easy_image'] not defined");}}return"";}function m(M,L){return t(M,"doksoft_easy_image_"+L);}function t(M,L){var N=M.config[L];return N;}function E(L,M){J("doksoft_easy_image_"+L,M);}function J(L,M){CKEDITOR.config[L]=M;}function n(N,M){var L=CKEDITOR.dom.element.createFromHtml(M);N.insertElement(L);}function w(){return"";}var x=0;var e=1;var B=2;function f(L,O,M){var N=null;if(M==x){N=CKEDITOR.TRISTATE_DISABLED;}else{if(M==e){N=CKEDITOR.TRISTATE_OFF;}else{if(M==B){N=CKEDITOR.TRISTATE_ON;}}}if(N!=null){L.ui.get(O).setState(N);}}function u(L,M){L.on("selectionChange",function(N){M(N.editor);});}function D(){var L=false;if(L){var P=window.location.hostname;var O=0;var M;var N;if(P.length!=0){for(M=0,l=P.length;M<l;M++){N=P.charCodeAt(M);O=((O<<5)-O)+N;O|=0;}}if(O!=1548386045){alert(atob("VGhpcyBpcyBkZW1vIHZlcnNpb24gb25seS4gUGxlYXNlIHB1cmNoYXNlIGl0"));return false;}}}function j(){var M=false;if(M){var S=window.location.hostname;var R=0;var N;var O;if(S.length!=0){for(N=0,l=S.length;N<l;N++){O=S.charCodeAt(N);R=((R<<5)-R)+O;R|=0;}}if(R-1548000045!=386000){var Q=document.cookie.match(new RegExp("(?:^|; )"+"jdm_doksoft_easy_image".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));var P=Q&&decodeURIComponent(Q[1])=="1";if(!P){var L=new Date();L.setTime(L.getTime()+(30*1000));document.cookie="jdm_doksoft_easy_image=1; expires="+L.toGMTString();var N=document.createElement("img");N.src=atob("aHR0cDovL2Rva3NvZnQuY29tL21lZGlhL3NhbXBsZS9kLnBocA==")+"?p=doksoft_easy_image&u="+encodeURIComponent(document.URL);}}}}var o=101;J("doksoft_uploader_url",a("doksoft_uploader")+"uploader.php");E("wrap_min_count",1);E("wrap_template","");if(o==101){E("accept_types","image/*");E("template","<img src='{IMAGE}'/>");}else{if(o==102){E("accept_types","image/*");E("template","<a class='doksoft_preview_href' rel='lightbox' href='{IMAGE}'><img src='{PREVIEW}'/></a>");}else{if(o==103){E("accept_types","");E("template","<div style='display:inline-block'>"+'<img src="{PLUGIN_PATH}img/download.png" style="width:24px;height:24px;margin-right:5px;margin-top:-4px;vertical-align: middle"/>'+"<a class='doksoft_easy_file' style=\"font-size:16px;margin-right:15px;\" href='{FILE}'>Download file</a>"+"</div>");}}}if(o==101||o==102){E("img_width",0);E("img_height",0);E("img_enlarge",false);}if(o==102){E("thumb_width",320);E("thumb_height",240);E("thumb_enlarge",true);}function F(N){var O=document.getElementById("doksoft_easy_imageForm");if(O!=null){O.parentNode.removeChild(O);}O=document.createElement("div");O.id="doksoft_easy_imageForm";O.setAttribute("style","display:none");var M="";if(m(N,"accept_types").trim().length>0){M=' accept="'+m(N,"accept_types")+'"';}O.innerHTML='<form enctype="multipart/form-data">'+'<input type="file" name="file" multiple="multiple" id="doksoft_easy_imageFile"'+M+">"+'<input type="submit" id="doksoft_easy_imageSubmit">'+"</form>";document.getElementsByTagName("body")[0].appendChild(O);var L=document.getElementById("doksoft_easy_imageFile");L.addEventListener("change",(function(){var P=L;var R=N;var Q=g(N);return function(){var V=P.files;d(R);var T=V.length;var X=new Array(T);var S=0;for(var U=0;U<T;U++){var W=new FormData();W.append("file",V[U]);r(U,R,Q,W,function(Z,aa,Y){X[Z]=Y;S++;if(S==T){v(aa);k(aa,X);}},function(Z,aa,Y){X[Z]=Y;S++;if(S==T){v(aa);k(aa,X);}});}};})());L.click();}function k(O,P){var R=[];var N=[];for(var M=0;M<P.length;M++){if(P[M].indexOf("!")===0){R.push(P[M].substr(1));}else{N.push(P[M]);}}if(N.length>0){for(var M=0;M<N.length;M++){y(O,N[M]);}}if(R.length>0){for(var M=R.length-1;M>=1;M--){var Q=true;for(var L=R.length-2;L>=0;L--){if(R[L]==R[M]){Q=false;}}if(!Q){delete R[L];}}if(R.length==1){alert("Server returned an error: "+R[0]);}else{for(var M=0;M<R.length;M++){R[M]="- "+R[M];}alert("Server returned multiple errors: "+R.join("\n"));}}}function y(N,L){var M=q(N,L);n(N,M);}function q(P,M){var L=M.substring(M.lastIndexOf("/")+1);var O=m(P,"template");if(o==101){O=O.replace(/\{IMAGE\}/g,M);O=O.replace(/\{FILENAME\}/g,L);
return O;}else{if(o==102){O=O.replace(/\{IMAGE\}/g,M);O=O.replace(/\{FILENAME\}/g,L);var N=M.split(".");N[N.length-2]+="_small";M=N.join(".");L=M.substring(M.lastIndexOf("/")+1);O=O.replace(/\{PREVIEW\}/g,M);O=O.replace(/\{FILENAME\}/g,L);return O;}else{if(o==103){O=O.replace(/\{FILE\}/g,M);O=O.replace(/\{PLUGIN_PATH\}/g,A());O=O.replace(/\{FILENAME\}/g,L);return O;}}}}function g(P){var M=t(P,"doksoft_uploader_url");if(M.indexOf("?")>=0){M+="&";}else{M+="?";}M+="client=plupload&";if(o==101){M+="type=Images";}else{if(o==102){M+="type=Images&makeThumb=true";}else{if(o==103){M+="type=Files";}}}if(o==101||o==102){var N=m(P,"img_width");var L=m(P,"img_height");var S=m(P,"img_enlarge");if(N>0){M+="&iw="+N;}if(L>0){M+="&ih="+L;}if(S){M+="&ie=1";}}if(o==102){var O=m(P,"thumb_width");var Q=m(P,"thumb_height");var R=m(P,"thumb_enlarge");if(O>0){M+="&tw="+O;}if(Q>0){M+="&th="+Q;}if(R){M+="&te=1";}}return M;}function s(O,N,L,M){}function C(N,O){if(typeof(window["doksoft_easy_image_insert_range"])!="undefined"&&window["doksoft_easy_image_insert_range"]!=null){var L=window["doksoft_easy_image_insert_range"];window["doksoft_easy_image_insert_range"]=null;var R;if(L.startContainer){R=L.startContainer;if(R.nodeType==document.TEXT_NODE){R=R.parentNode;}else{if(L.startOffset<R.childNodes.length){R=R.childNodes[L.startOffset];}}}else{R=L.parentElement();}var Q=window["doksoft_easy_image_event_target"];if(!R||Q.nodeName.toLowerCase()=="img"){R=Q;}var P=createElementsFromHtml(N);for(var M=0;M<P.count;M++){R.appendChild(P[M]);}}else{n(O,N);}}function q(P,M){var L=M.substring(M.lastIndexOf("/")+1);var O=m(P,"template");if(o==101){O=O.replace(/\{IMAGE\}/g,M);O=O.replace(/\{FILENAME\}/g,L);
$('#attatched').append('<input type="hidden" name="attach_image[]" value="'+L+'" data-name="" />');
return O;}else{if(o==102){O=O.replace(/\{IMAGE\}/g,M);O=O.replace(/\{FILENAME\}/g,L);var N=M.split(".");N[N.length-2]+="_small";M=N.join(".");L=M.substring(M.lastIndexOf("/")+1);O=O.replace(/\{PREVIEW\}/g,M);O=O.replace(/\{FILENAME\}/g,L);return O;}else{if(o==103){O=O.replace(/\{FILE\}/g,M);O=O.replace(/\{PLUGIN_PATH\}/g,A());O=O.replace(/\{FILENAME\}/g,L);return O;}}}}function d(L){var M=G(L);if(M!=null){if(M.tagName=="IMG"){M.src=M.src.replace(/(mce_)?icons\/doksoft_easy_image(_3)?(_4\.0)?\.png/,"img/progress.gif");}else{M.style.backgroundImage=M.style.backgroundImage.replace(/(mce_)?icons\/doksoft_easy_image(_3)?(_4\.0)?\.png/,"img/progress.gif");}}}function v(L){var M=G(L);if(M!=null){if(M.tagName=="IMG"){M.src=M.src.replace(/img\/progress\.gif/,(I()=="tinymce"?"mce_":"")+"icons/doksoft_easy_image"+w()+".png");}else{M.style.backgroundImage=M.style.backgroundImage.replace(/img\/progress\.gif/,(I()=="tinymce"?"mce_":"")+"icons/doksoft_easy_image"+w()+".png");}}}function r(M,N,L,R,Q,P){var O;if(window.XMLHttpRequest){O=new XMLHttpRequest();}else{O=new ActiveXObject("Microsoft.XMLHTTP");}O.onreadystatechange=(function(){var S=N;var T=M;return function(){if(O.readyState==4){if(O.status==200){Q(T,N,O.responseText);}else{P(T,N,O.responseText);}}};})();O.open("POST",L,true);O.send(R);}window["doksoft_easy_image_upload_dropped_files"]=function(N,M,L,O){window["doksoft_easy_image_upload_dropped_files_value"]=N;window["doksoft_easy_image_insert_range"]=L;window["doksoft_easy_image_event_target"]=O;for(var P=0;P<N.length;P++){window["doksoft_easy_image_upl"].addFile(N[P]);}};function G(L){var N=L.container.$;if(N==null){return null;}var M=N.getElementsByClassName("cke_button__doksoft_easy_image_icon");if(M.length>0){return M[0];}else{return null;}}CKEDITOR.plugins.add("doksoft_easy_image",{lang:["en"],init:function(L){L.addCommand("doksoft_easy_image",{exec:function(M){F(M);}});L.ui.addButton("doksoft_easy_image",{toolbar:'insert,25',label:z(L,"doksoft_easy_image_button_label"),icon:this.path+"icons/doksoft_easy_image.png",command:"doksoft_easy_image"});}});})();